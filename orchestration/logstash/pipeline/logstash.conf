# This is the Logstash configuration file.

input {
  # Listen for incoming logs over TCP on port 5000.
  # Our Python services will send their logs here.
  tcp {
    port => 5000
    codec => json_lines # Expect logs to be in JSON format, one per line.
  }
}

filter {
  # (Optional) Here you can add filters to parse, mutate, or enrich the logs.
  # For example, you could parse a timestamp or add geoip information.
  # For now, we will keep it simple.
}

output {
  # Send the logs to our Elasticsearch service.
  elasticsearch {
    hosts => ["http://elasticsearch:9200"] # The service name from docker-compose
    index => "logstash-%{+YYYY.MM.dd}" # Create a new index for each day.
  }

  # (Optional) For debugging purposes, you can also print logs to the console.
  # stdout {
  #   codec => rubydebug
  # }
}
